<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DAA — Important Info</title>
  <style>
    :root{
      --bg:#f7f7f9; --card:#fff; --text:#111; --muted:#666; --border:#e5e7eb; --accent:#0f62fe;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text)}
    header{padding:20px 16px;text-align:center}
    h1{margin:0 0 6px;font-size:22px}
    .tabs{max-width:1100px;margin:0 auto;padding:0 12px 28px}
    .tabbar{display:flex;gap:8px;border-bottom:1px solid var(--border);}
    .tabbar a{padding:10px 12px;border:1px solid var(--border);border-bottom:0;background:var(--card);border-top-left-radius:10px;border-top-right-radius:10px;text-decoration:none;color:var(--text)}
    .tabbar a.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .panel{background:var(--card);border:1px solid var(--border);border-radius:0 12px 12px 12px;padding:14px}
    .legend{display:none}
    .legend .chip{display:inline-flex;gap:6px;align-items:center}
    .legend .dot{width:10px;height:10px;border-radius:999px;display:inline-block;border:1px solid rgba(0,0,0,.1)}

    /* timeline */
    .timeline{margin:18px 0 28px}
    .timeline h2{font-size:16px;margin:0 0 8px}
    .months{display:grid;gap:8px;align-items:start}
    /* 10 months Oct 2025 → Jul 2026 */
    .months{grid-template-columns:repeat(10,minmax(90px,1fr))}
    .month{position:relative;border:1px solid var(--border);border-radius:10px;padding:10px}
    .month .head{font-size:12px;font-weight:700;margin-bottom:8px;padding:4px 6px;border-radius:6px;color:#111;background:#eee;display:inline-block}
    .axis{height:2px;background:#111;opacity:.6;position:absolute;left:8px;right:8px;top:32px}
    .event{background:#fff;border:1px solid var(--border);border-left-width:6px;border-radius:8px;padding:6px 8px;margin:6px 0;font-size:12px}
    .event small{display:block;color:var(--muted)}

    .note{color:var(--muted);font-size:13px;margin-top:8px}
    iframe{width:100%;height:80vh;border:0;border-radius:12px}
    @media (max-width:900px){.months{grid-template-columns:repeat(5,1fr)}}
  .info{margin-top:18px}
.info h3{margin:0 0 10px;font-size:16px}
.info table{width:100%;border-collapse:separate;border-spacing:0;background:var(--card);border:1px solid #e5e7eb;border-radius:14px;overflow:hidden;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.info thead th{background:#f3f4f6;color:#374151;font-weight:600;padding:10px 12px;text-align:left}
.info tbody td,.info tbody th{padding:12px;border-top:1px solid #e5e7eb;vertical-align:top;text-align:left}
.info tbody th{width:280px;color:#374151;background:#fafafa}
.info a.btn{display:inline-block;padding:8px 10px;border:1px solid var(--border);border-radius:10px;text-decoration:none}
.info a.btn:hover{border-color:var(--accent)}
.tz{color:#dc2626;font-weight:800}
.disclaimer{max-width:1100px;margin:0 auto 10px;color:#b91c1c;background:#fff;border:1px solid #fecaca;border-radius:12px;padding:10px 12px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.disclaimer a{color:var(--accent);text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <h1>DAA — Important Info</h1>
  </header>

  <main class="tabs">
	<nav class="tabbar" role="tablist">
	  <a href="#timelines" id="tab-tl" class="active" role="tab" aria-controls="timelines" aria-selected="true">Timeline</a>
	  <a href="#calculator" id="tab-calc" role="tab" aria-controls="calculator" aria-selected="false">GPA Calculator</a>
	  <a href="#planner" id="tab-planner" role="tab" aria-controls="planner" aria-selected="false">IB Planner</a>
	</nav>

    <section id="timelines" class="panel" role="tabpanel" aria-labelledby="tab-tl"></section>
    <section id="calculator" class="panel" role="tabpanel" aria-labelledby="tab-calc" hidden>
      <!-- Keep your calculator as-is in a separate file named calculator.html in the same folder. -->
      <div class="note"></div>
      <iframe src="calculator.html" title="GPA Calculator"></iframe>
    </section>
		<section id="planner" class="panel" role="tabpanel" aria-labelledby="tab-planner" hidden>
	  <div class="note"></div>
	  <iframe src="planner.html" title="IB Planner"></iframe>
	</section>

  </main>

  <script>
    // Month palette (up to 12)
    const monthColors = ['#60a5fa','#34d399','#fbbf24','#a78bfa','#f87171','#22c55e','#f472b6','#06b6d4','#f59e0b','#10b981','#ef4444','#0ea5e9'];
    // Months covered: Oct 2025 → Jul 2026 (10 buckets)
    const months = [
      {key:'2025-10', label:'Oct 2025'},
      {key:'2025-11', label:'Nov 2025'},
      {key:'2025-12', label:'Dec 2025'},
      {key:'2026-01', label:'Jan 2026'},
      {key:'2026-02', label:'Feb 2026'},
      {key:'2026-03', label:'Mar 2026'},
      {key:'2026-04', label:'Apr 2026'},
      {key:'2026-05', label:'May 2026'},
      {key:'2026-06', label:'Jun 2026'},
      {key:'2026-07', label:'Jul 2026'}
    ];

    // Helpers
//    function monthKey(dt){ return dt.toISOString().slice(0,7); }
   // function fmtSingle(dateStr){
    //  const d = new Date(dateStr+'T00:00:00');
    //  return d.toLocaleDateString(undefined,{month:'long', day:'numeric'}); // April 29
   // }
	
	function monthKey(dt){ 
  // Use local date methods instead of UTC
  const year = dt.getFullYear();
  const month = (dt.getMonth() + 1).toString().padStart(2, '0');
  return `${year}-${month}`;
}
function fmtSingle(dateStr){
  const d = new Date(dateStr);
  return d.toLocaleDateString(undefined,{month:'long', day:'numeric'});
}
    function fmtRange(s,e){
	  const ds = new Date(s);
      const de = new Date(e);
     // const ds = new Date(s+'T00:00:00');
      //const de = new Date(e+'T00:00:00');
      const sameDay = ds.getTime()===de.getTime();
      if(sameDay) return fmtSingle(s);
      const sameMonth = ds.getFullYear()===de.getFullYear() && ds.getMonth()===de.getMonth();
      if(sameMonth){
        const monthName = ds.toLocaleDateString(undefined,{month:'long'});
        return `${monthName} ${ds.getDate()} – ${de.getDate()}`; // April 2 – 5
      }
      const a = ds.toLocaleDateString(undefined,{month:'long', day:'numeric'});
      const b = de.toLocaleDateString(undefined,{month:'long', day:'numeric'});
      return `${a} – ${b}`; // April 24 – May 20
    }

    // Data (unchanged)
    const items = [
      // GENERAL
      {title:'No School', start:'2025-10-13', end:'2025-10-15', type:'general'},
      {title:'MS/HS PD (No School for MS/HS)', start:'2025-10-27', end:'2025-10-27', type:'general'},
      {title:'HS/MS Parent Teacher Conference', start:'2025-11-24', end:'2025-11-24', type:'general'},
      {title:'Thanksgiving (in School)', start:'2025-11-27', end:'2025-11-27', type:'general'},
      {title:'National Day', start:'2025-12-02', end:'2025-12-03', type:'general'},
      {title:'Winter Break (No School)', start:'2025-12-08', end:'2026-01-02', type:'general'},
      {title:'HS PD (No School for HS)', start:'2026-02-09', end:'2026-02-09', type:'general'},
      {title:'Start of Ramadan', start:'2026-02-18', end:'2026-02-18', type:'general'},
      {title:'No School', start:'2026-02-19', end:'2026-02-20', type:'general'},
      {title:'Spring Break', start:'2026-03-16', end:'2026-03-27', type:'general'},
      {title:'Eid al Fitr', start:'2026-03-19', end:'2026-03-20', type:'general'},
      {title:'Eid Al Adha', start:'2026-05-26', end:'2026-05-29', type:'general'},
      {title:'Grade 12 Graduation', start:'2026-05-31', end:'2026-05-31', type:'general'},
      {title:'Islamic New Year', start:'2026-06-16', end:'2026-06-16', type:'general'},
      {title:'HS End of Year Exams', start:'2026-06-08', end:'2026-06-19', type:'general'},
      {title:'Last day of school (noon dismissal)', start:'2026-07-03', end:'2026-07-03', type:'general'},
     

      // IB
	  
	  {title: 'CAS Submission & Final IA Work', start:'2026-03-15', end:'2026-03-15', type:'IB'  },
	   {title: 'UCAS Equal Consideration Closes', start:'2026-01-14', end:'2026-01-14', type:'IB'  },
	  {title: 'UCAS Final January Deadline', start:'2026-01-29', end:'2026-01-29', type:'IB'  },	 
      {title:'IB Y1 HL Week & IB Y2 Mock Exams', start:'2026-01-19', end:'2026-01-30', type:'IB'},
      {title:'HS & AP Semester 1 Exams', start:'2026-01-23', end:'2026-01-30', type:'IB'},
      {title:'IB Exams', start:'2026-04-24', end:'2026-05-20', type:'IB'},
      {title:'AP Exams TBC', start:'2026-05-04', end:'2026-05-22', type:'IB'},
	  {title: 'EE Final Due', start:'2025-10-01', end:'2025-10-01', type:'IB'  },
      {title:'EE — Extended Essay', start:'2025-10-23', end:'2025-10-23', type:'IB'},
      {title:'TOK — Essay', start:'2026-02-12', end:'2026-02-12', type:'IB'},
    ];

    function buildTimeline(){
      const root = document.getElementById('timelines');

      // Month color legend
      const legend = document.createElement('div');
      legend.className='legend';
      months.forEach((m, i)=>{
        const chip=document.createElement('span');
        chip.className='chip';
        chip.innerHTML=`<span class=\"dot\" style=\"background:${monthColors[i%12]}\"></span>${m.label}`;
        legend.appendChild(chip);
      });
      // Add note above legend
      const note=document.createElement('div');
      note.className='disclaimer';
      note.innerHTML = `The information on this website was collaboratively compiled by parents, with thanks to Ms. Rania Mukhar. <br>For official dates and details, please always refer to the <a href="https://www.gemsaa-dubai.com/About-Us/Academic-Calendar" target="_blank" rel="noopener">DAA Official Calendar</a> and confirm with the appropriate school contacts.`;
      root.appendChild(note);

      root.appendChild(legend);

      ['IB','general'].forEach(kind=>{
        const section=document.createElement('section');
        section.className='timeline';
        section.innerHTML=`<h2>${kind==='IB'?'IB timeline':'General timeline'}</h2>`;

        const wrap=document.createElement('div');
        wrap.className='months';

        months.forEach((m, idx)=>{
          const box=document.createElement('div');
          box.className='month';
          const head=document.createElement('div');
          head.className='head';
          head.style.background = monthColors[idx%12];
          head.textContent=m.label;
          box.appendChild(head);

          const list=document.createElement('div');
          // Only place each item in its START month
          const relevant = items.filter(x=>x.type===kind && monthKey(new Date(x.start+'T00:00:00'))===m.key);
          relevant.forEach(r=>{
            const el=document.createElement('div');
            el.className='event';
            el.style.borderLeftColor = monthColors[idx%12];
            el.innerHTML = `<strong>${r.title}</strong><small>${fmtRange(r.start, r.end)}</small>`;
            list.appendChild(el);
          });

          if(!list.children.length){
            const empty=document.createElement('div');
            empty.style.color='var(--muted)';
            empty.style.fontSize='12px';
            empty.textContent='—';
            list.appendChild(empty);
          }

          box.appendChild(list);
          wrap.appendChild(box);
        });
        section.appendChild(wrap);
        root.appendChild(section);
      });

      // Important info table
      const info = document.createElement('section');
      info.className='info';
      info.innerHTML = `
        <h3>Important information</h3>
        <table aria-label="Important information">
          <thead>
            <tr><th>Item</th><th>Details</th></tr>
          </thead>
          <tbody>
            <tr>
              <th>Official May 2026 IB exam schedule</th>
              <td>
                <a class="btn" href="https://www.ibo.org/globalassets/new-structure/programmes/dp/pdfs/may-2026-examination-schedule.pdf" target="_blank" rel="noopener">Open PDF</a>
              </td>
            </tr>
            <tr>
              <th>Exam time zone</th>
              <td>The IB divides schools into zones by local time. The Middle East is <span class="tz">Exam Zone B (also known as TZ2)</span>, covering Europe, Africa, and the Middle East.</td>
            </tr>
			   <tr>
              <th>Powerschool district code</th>
              <td>QNNZ</td>
            </tr>
						   <tr>
              <th>DAA SAT code</th>
              <td>52822</td>
            </tr>
						   <tr>
              <th>UCAS Buzzword</th>
              <td>daaYYYY, e.g., daa2026</td>
            </tr>
          </tbody>
        </table>`;
      root.appendChild(info);
    }

    // Tabs
function setupTabs(){
  const tabTl = document.getElementById('tab-tl');
  const tabCalc = document.getElementById('tab-calc');
  const tabPlanner = document.getElementById('tab-planner');

  const pTl = document.getElementById('timelines');
  const pCalc = document.getElementById('calculator');
  const pPlanner = document.getElementById('planner');

  function sel(which){
    const showTl = which === 'tl';
    const showCalc = which === 'calc';
    const showPlanner = which === 'planner';

    tabTl.classList.toggle('active', showTl);
    tabCalc.classList.toggle('active', showCalc);
    tabPlanner.classList.toggle('active', showPlanner);

    pTl.hidden = !showTl;
    pCalc.hidden = !showCalc;
    pPlanner.hidden = !showPlanner;

    tabTl.setAttribute('aria-selected', showTl);
    tabCalc.setAttribute('aria-selected', showCalc);
    tabPlanner.setAttribute('aria-selected', showPlanner);
  }

  tabTl.addEventListener('click', e => { e.preventDefault(); sel('tl'); });
  tabCalc.addEventListener('click', e => { e.preventDefault(); sel('calc'); });
  tabPlanner.addEventListener('click', e => { e.preventDefault(); sel('planner'); });
}


    document.addEventListener('DOMContentLoaded', ()=>{
      buildTimeline();
      setupTabs();
    });
  </script>
</body>
</html>
